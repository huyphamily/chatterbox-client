<!doctype html>
<html>
  <head>
    <meta charset="utf-8">
    <title>chatterbox</title>
    <link rel="stylesheet" href="styles/styles.css">

    <!-- dependencies -->
    <script src="bower_components/jquery/jquery.min.js"></script>
    <script src="bower_components/underscore/underscore.js"></script>
    <!-- your scripts -->
    <script src="scripts/config.js"></script>
    <script src="scripts/app.js"></script>
  </head>
  <body>

    <script>
    $(document).ready(function() {

      //load initial messages
      app.fetch();
      //refresh messages
      setInterval(function(){
        app.clearMessages();
        app.fetch();
      }, 15000);
      //sen messages

      var sendMessage = function(){
        app.send({
            username: window.location.href.split("=")[1],
            text: $(".draft").val(),
            roomname: "default"
          });
          $(".draft").val("");
      };

      $("body").on("keypress", function(event){
        if(event.which === 13 ){
          sendMessage();
        }
      });

      $("#send").on("click", function(){
        sendMessage();
      });


    });
    </script>

    <div id="main">
      <h1>chatterbox</h1>
      <!-- Your HTML goes here! -->
      <input class="draft" type="text"> <button id="send">Send</button>
      <ul id="chats"></ul>
    </div>
  </body>
</html>
